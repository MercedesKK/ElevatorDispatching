(function(){"use strict";var e={3599:function(e,l,t){var o=t(9242),u=t(3396);function n(e,l){const t=(0,u.up)("router-view");return(0,u.wg)(),(0,u.j4)(t)}var a=t(89);const r={},i=(0,a.Z)(r,[["render",n]]);var s=i,c=t(2483),v=(t(7658),t(7139)),d=t(4870);const f=e=>((0,u.dD)("data-v-6861ceef"),e=e(),(0,u.Cn)(),e),p={style:{display:"flex","justify-content":"center"}},_={style:{display:"flex","justify-content":"center"}},m={style:{display:"flex","justify-content":"center"}},w={class:"btn-group"},g={class:"button-box"},b=f((()=>(0,u._)("p",null,"别慌，速速联系我email，我来救你！！！",-1))),h={class:"btn-group"},y={class:"btn-floor-span"},k={class:"btn-floor-span"};var x={__name:"myElevator",emits:["upArrive","downArrive"],setup(e,{expose:l,emit:t}){const o=(0,d.iH)(!1),n=()=>{o.value=!0},a=e=>{console.log(e),o.value=!1};let r=(0,d.iH)([]),i=(0,d.iH)(5),s=(0,d.iH)(!1),c=(0,d.iH)(!1),f=(0,d.iH)(0),x=(0,d.iH)([]);l({floors:r,cur_floor:i,cur_floor_moving:s,cur_door_open:c,cur_direction:f,task_queue:x,openDoor:O}),(0,u.wF)((()=>{for(let e=1;e<=20;e++)r.value.push(!1)})),(0,u.Ah)((()=>{clearInterval(H)}));const W=(0,u.Fl)((()=>1===f.value?"上楼":0===f.value?"静止":-1===f.value?"下楼":"")),U=(0,u.Fl)((()=>c.value?"门开了":"门关着"));function O(e){console.log("open"),s.value||c.value||(c.value=!0,s.value=!1,setTimeout((()=>{q()}),e))}function q(){!s.value&&c.value&&(c.value=!1,console.log("close"),S(),0===x.value.length?s.value=!1:s.value=!0)}const S=()=>{if(0===x.value.length)return void(f.value=0);let e=Math.max.apply(Math,x.value),l=Math.min.apply(Math,x.value);if(1===f.value){if(e>i.value)return;f.value=-1}else if(-1===f.value){if(l<i.value)return;f.value=1}else if(0===f.value){if(0===x.value.length)return;{let e=x.value[0];e>i.value?f.value=1:e<i.value?f.value=-1:e===i.value&&(f.value=0)}}},j=e=>{console.log(e+"was clicked"),e===i.value&&!1===s.value&&(console.log("在当前层停止"),O(3e3)),-1===x.value.indexOf(e)?(x.value.push(e),r.value[e-1]=!0):console.log("已经在队列中了")},D=()=>{if(c.value)return;if(S(),0===x.value.length)return void(s.value=!1);s.value=!0,i.value=i.value+f.value;let e=x.value.indexOf(i.value);-1!==e&&(s.value=!1,x.value.splice(e,1),r.value[i.value-1]=!1,O(3e3))},C=()=>{0===f.value?(t("upArrive",i.value),t("downArrive",i.value)):1===f.value?t("upArrive",i.value):-1===f.value&&t("downArrive",i.value)};let H=setInterval((()=>{D(),C()}),1500);return(e,l)=>{const t=(0,u.up)("el-card"),s=(0,u.up)("el-button"),c=(0,u.up)("a-modal");return(0,u.wg)(),(0,u.j4)(t,{class:"elevator-card"},{default:(0,u.w5)((()=>[(0,u.Wm)(t,null,{default:(0,u.w5)((()=>[(0,u._)("div",p," 当前"+(0,v.zw)((0,d.SU)(i))+"楼",1),(0,u._)("div",_,(0,v.zw)((0,d.SU)(W)),1),(0,u._)("div",m,(0,v.zw)((0,d.SU)(U)),1)])),_:1}),(0,u._)("div",w,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,d.SU)(r),((e,l)=>((0,u.wg)(),(0,u.iD)("div",{key:l,class:"btn-floor-span"},[(0,u.Wm)(s,{round:"",class:"btn-floor",onClick:e=>j(l+1),disabled:(0,d.SU)(r)[l]},{default:(0,u.w5)((()=>[(0,u.Uk)((0,v.zw)(l+1),1)])),_:2},1032,["onClick","disabled"])])))),128))]),(0,u._)("div",g,[(0,u.Wm)(s,{type:"danger",class:"mt-btn-danger",round:"",onClick:n},{default:(0,u.w5)((()=>[(0,u.Uk)("报警")])),_:1}),(0,u.Wm)(c,{visible:o.value,"onUpdate:visible":l[0]||(l[0]=e=>o.value=e),title:"Basic Modal",onOk:a},{default:(0,u.w5)((()=>[b])),_:1},8,["visible"])]),(0,u._)("div",h,[(0,u._)("div",y,[(0,u.Wm)(s,{type:"info",onClick:l[1]||(l[1]=e=>O(3e3))},{default:(0,u.w5)((()=>[(0,u.Uk)("开门")])),_:1})]),(0,u._)("div",k,[(0,u.Wm)(s,{type:"info"},{default:(0,u.w5)((()=>[(0,u.Uk)("关门")])),_:1})])])])),_:1})}}};const W=(0,a.Z)(x,[["__scopeId","data-v-6861ceef"]]);var U=W,O=t.p+"img/myPhoto.39159d05.png";const q=e=>((0,u.dD)("data-v-74b79aa0"),e=e(),(0,u.Cn)(),e),S={class:"myFramework","aria-label":"A complete example of page header"},j=q((()=>(0,u._)("div",{class:"flex items-center"},[(0,u._)("img",{class:"my_photo",src:O}),(0,u._)("span",{class:"text-large font-600 mr-3"}," MercedesKK ")],-1))),D=q((()=>(0,u._)("p",{class:"mt-4 text-sm"},null,-1)));function C(e,l){const t=(0,u.up)("el-breadcrumb-item"),o=(0,u.up)("el-breadcrumb"),n=(0,u.up)("el-descriptions-item"),a=(0,u.up)("el-descriptions"),r=(0,u.up)("el-page-header");return(0,u.wg)(),(0,u.iD)("div",S,[(0,u.Wm)(r,null,{breadcrumb:(0,u.w5)((()=>[(0,u.Wm)(o,{separator:"/"},{default:(0,u.w5)((()=>[(0,u.Wm)(t,null,{default:(0,u.w5)((()=>[(0,u.Uk)(" 电梯调度作业 ")])),_:1})])),_:1})])),content:(0,u.w5)((()=>[j])),default:(0,u.w5)((()=>[(0,u.Wm)(a,{column:3,size:"small",class:"mt-4 padding_left"},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{label:"Username"},{default:(0,u.w5)((()=>[(0,u.Uk)("张靖凯")])),_:1}),(0,u.Wm)(n,{label:"School"},{default:(0,u.w5)((()=>[(0,u.Uk)("同济大学软件学院")])),_:1}),(0,u.Wm)(n,{label:"Email"},{default:(0,u.w5)((()=>[(0,u.Uk)("2455650395@qq.com")])),_:1})])),_:1}),D])),_:1})])}const H={},M=(0,a.Z)(H,[["render",C],["__scopeId","data-v-74b79aa0"]]);var A=M,Z=t(7681),P=t(5605);const z={class:"btn-group"},F={class:"up-down-div"},I={class:"up-down-div"},R={class:"up-down-div"};var T={__name:"myBoard",emits:["upRequest","downRequest"],setup(e,{expose:l,emit:t}){let o=(0,d.iH)([]);(0,u.bv)((()=>{for(let e=0;e<20;e++)o.value.push({up:!1,down:!1})})),l({buttons_group:o});const n=(e,l)=>{1===l&&!1===o.value[e-1].up?(o.value[e-1].up=!0,t("upRequest",{floor_calling:e,direction_calling:l})):-1===l&&!1===o.value[e-1].down&&(o.value[e-1].down=!0,t("downRequest",{floor_calling:e,direction_calling:l}))};return(e,l)=>{const t=(0,u.up)("el-button"),a=(0,u.up)("el-card");return(0,u.wg)(),(0,u.j4)(a,null,{default:(0,u.w5)((()=>[(0,u._)("div",z,[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)((0,d.SU)(o),((e,l)=>((0,u.wg)(),(0,u.iD)("div",{key:l,class:"btn-floor-span"},[(0,u.Wm)(a,{class:"up-down-card"},{default:(0,u.w5)((()=>[(0,u._)("div",F,[(0,u.Wm)(t,{class:"btn-floor",disabled:(0,d.SU)(o)[l].up,onClick:e=>n(l+1,1)},{default:(0,u.w5)((()=>[(0,u.Wm)((0,d.SU)(Z.Z))])),_:2},1032,["disabled","onClick"])]),(0,u._)("div",I,(0,v.zw)(l+1),1),(0,u._)("div",R,[(0,u.Wm)(t,{class:"btn-floor",disabled:(0,d.SU)(o)[l].down,onClick:e=>n(l+1,-1)},{default:(0,u.w5)((()=>[(0,u.Wm)((0,d.SU)(P.Z))])),_:2},1032,["disabled","onClick"])])])),_:2},1024)])))),128))])])),_:1})}}};const K=(0,a.Z)(T,[["__scopeId","data-v-173f6507"]]);var $=K;const E={class:"home container"},Y={class:"elevators"},B={class:"elevators"};var N={__name:"HomeView",setup(e){const l=5;let t;(0,u.bv)((()=>{t=(0,u.FN)()}));const o=e=>{let t=50,o=0;for(let u=0;u<l;u++)e[u].task_queue.length<t&&(t=e[u].task_queue.length,o=u);return o},n=(e,l,t)=>{let o=50,u=0;for(let n of e)Math.abs(t[n].cur_floor-l)<o&&(o=Math.abs(t[n].cur_floor-l),u=n);return u},a=e=>{t.ctx.$refs.floor_board.buttons_group[e-1].up=!1},r=e=>{t.ctx.$refs.floor_board.buttons_group[e-1].down=!1},i=e=>{console.log(e);let u=t.ctx.$refs.elevator_group,{direction_calling:a,floor_calling:r}=e,i=[];for(let t=0;t<l;t++){if(0===u[t].cur_direction){if(u[t].cur_floor===r)return void u[t].openDoor(3e3);i.push(t)}u[t].cur_direction===a&&r-u[t].cur_floor>0&&i.push(t)}if(0!==i.length){let e=n(i,r,u);-1===u[e].task_queue.indexOf(r)&&u[e].task_queue.push(r)}else{let e=o(u);-1===u[e].task_queue.indexOf(r)&&u[e].task_queue.push(r)}},s=e=>{console.log(e);let u=t.ctx.$refs.elevator_group,{direction_calling:a,floor_calling:i}=e,s=[];for(let t=0;t<l;t++){if(0===u[t].cur_direction){if(u[t].cur_floor===i)return r(i),void u[t].openDoor(3e3);s.push(t)}u[t].cur_direction===a&&i-u[t].cur_floor<0&&s.push(t)}if(0!==s.length){let e=n(s,i,u);-1===u[e].task_queue.indexOf(i)&&u[e].task_queue.push(i)}else{let e=o(u);-1===u[e].task_queue.indexOf(i)&&u[e].task_queue.push(i)}};return(e,t)=>{const o=(0,u.up)("el-col"),n=(0,u.up)("el-row");return(0,u.wg)(),(0,u.iD)("div",E,[(0,u.Wm)(A),(0,u.Wm)(n,null,{default:(0,u.w5)((()=>[(0,u._)("div",Y,[((0,u.wg)(),(0,u.iD)(u.HY,null,(0,u.Ko)(l,(e=>(0,u.Wm)(o,{span:4,key:e},{default:(0,u.w5)((()=>[(0,u.Wm)(U,{ref_for:!0,ref:"elevator_group",onUpArrive:a,onDownArrive:r},null,512)])),_:2},1024))),64))])])),_:1}),(0,u.Wm)(n,null,{default:(0,u.w5)((()=>[(0,u._)("div",B,[(0,u.Wm)(o,{span:22},{default:(0,u.w5)((()=>[(0,u.Wm)($,{ref:"floor_board",onUpRequest:i,onDownRequest:s},null,512)])),_:1})])])),_:1})])}}};const V=(0,a.Z)(N,[["__scopeId","data-v-11d643bd"]]);var G=V;const J=[{path:"/",name:"home",component:G}],L=(0,c.p7)({history:(0,c.PO)(),routes:J});var Q=L,X=t(65),ee=(0,X.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),le=t(8132),te=(t(4415),t(4132));t(2467);(0,o.ri)(s).use(ee).use(Q).use(le.Z).use(te.ZP).mount("#app")}},l={};function t(o){var u=l[o];if(void 0!==u)return u.exports;var n=l[o]={exports:{}};return e[o].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(l,o,u,n){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],u=e[c][1],n=e[c][2];for(var r=!0,i=0;i<o.length;i++)(!1&n||a>=n)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(r=!1,n<a&&(a=n));if(r){e.splice(c--,1);var s=u();void 0!==s&&(l=s)}}return l}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,u,n]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var o in l)t.o(l,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(l){return 0===e[l]};var l=function(l,o){var u,n,a=o[0],r=o[1],i=o[2],s=0;if(a.some((function(l){return 0!==e[l]}))){for(u in r)t.o(r,u)&&(t.m[u]=r[u]);if(i)var c=i(t)}for(l&&l(o);s<a.length;s++)n=a[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},o=self["webpackChunkmy_elevator"]=self["webpackChunkmy_elevator"]||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(3599)}));o=t.O(o)})();
//# sourceMappingURL=app.a9b6e180.js.map